<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="Z80.js"></script>
    <script src="utils.js"></script>
    <script src="MinZX.js"></script>
    <script src="ZXScreen.js"></script>
    <script src="ZXKeyboard.js"></script>
    <script src="ZXSound.js"></script>
    <title>MinZX - Minimalistic ZX Spectrum 48K emulator</title>
    <style>
body {
    background: #DDD;
    font-family: Arial, Helvetica, sans-serif;
}
    </style>
</head>
<body>
    <p>MinZX - Minimalistic ZX Spectrum 48K emulator</p>
    <p>Developed in 2020 by <a href="https://github.com/dcrespo3d">DCrespo</a>, see <a href="https://github.com/dcrespo3d/MinZX">source code</a></p>
    <canvas id=zxscreen></canvas>
    <br/><br/>
    <button id=btnLoadSnaFile>Load Snapshot...</button>
    <button id=btnReset>Reset</button>

    <script>
/**/
///////////////////////////////////////////////////////////////////////////////
/// @file index.html
///
/// @brief main html file for the MinZX 48K Spectrum emulator
///
/// @author David Crespo Tascon
//////
/// @copyright (c) David Crespo Tascon
///  This code is released under the MIT license,
///  a copy of which is available in the associated LICENSE file,
///  or at http://opensource.org/licenses/MIT
///////////////////////////////////////////////////////////////////////////////

"use strict";

let minzx = null;

window.addEventListener('load', function() {
    // create new instance of MinZX emulator,
    // using element with id 'zxscr' as canvas,
    minzx = new MinZX('zxscreen');

    // start emulator
    minzx.start();

    // chrome starts AudioContext in suspended state.
    let resumeOnce = true;
    window.addEventListener('keydown', function() {
        if (resumeOnce) {
            resumeOnce = false;
            theAudioContext.resume();
        }
    });

    // load snapshot button
    const btnLoadSnaFile = document.getElementById('btnLoadSnaFile');
    btnLoadSnaFile.addEventListener('click', function() {
        if (resumeOnce) {
            resumeOnce = false;
            theAudioContext.resume();
        }
        loadLocalFile(function(data) {
            minzx.loadSNA(data);
        });
    });

    // reset button
    const btnReset = document.getElementById('btnReset');
    btnReset.addEventListener('click', function() {
        minzx.reset();
    });
});
/**/
    </script>
</body>
</html>